<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="545.8333px" preserveAspectRatio="none" style="width:667px;height:545px;background:#00000000;" version="1.1" viewBox="0 0 667 545" width="667.7083px" zoomAndPan="magnify"><defs/><g><path d="M88.5417,51.18 L88.8336,51.18 L87.9662,61.5352 L88.8101,71.8903 L89.0968,82.2455 L87.5508,92.6006 L88.4337,102.9558 L87.9493,113.311 L88.009,123.6661 L88.447,134.0213 L87.5814,144.3764 L89.3106,154.7316 L87.6663,165.0868 L88.267,175.4419 L89.1416,185.7971 L88.4225,196.1522 L88.6364,206.5074 L88.4973,216.8625 L88.7896,227.2177 L88.8738,237.5729 L89.3551,247.928 L89.4737,258.2832 L89.4851,268.6383 L88.8953,278.9935 L89.1855,289.3487 L89.517,299.7038 L87.54,310.059 L89.484,320.4141 L88.1299,330.7693 L89.2831,341.1244 L87.8541,351.4796 L88.4465,361.8348 L89.5717,372.1899 L88.474,382.5451 L88.6879,392.9002 L89.012,403.2554 L89.1198,413.6106 L88.5362,423.9657 L88.9406,434.3209 L87.7466,444.676 L88.9366,455.0312 L89.303,465.3863 L89.1591,475.7415 L89.3931,486.0967 L88.5417,496.4518 " fill="none" style="stroke:#555555;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;"/><path d="M388.5417,51.18 L388.8336,51.18 L387.9662,61.5352 L388.8101,71.8903 L389.0968,82.2455 L387.5508,92.6006 L388.4337,102.9558 L387.9493,113.311 L388.009,123.6661 L388.447,134.0213 L387.5814,144.3764 L389.3106,154.7316 L387.6663,165.0868 L388.267,175.4419 L389.1416,185.7971 L388.4225,196.1522 L388.6364,206.5074 L388.4973,216.8625 L388.7896,227.2177 L388.8738,237.5729 L389.3551,247.928 L389.4737,258.2832 L389.4851,268.6383 L388.8953,278.9935 L389.1855,289.3487 L389.517,299.7038 L387.54,310.059 L389.484,320.4141 L388.1299,330.7693 L389.2831,341.1244 L387.8541,351.4796 L388.4465,361.8348 L389.5717,372.1899 L388.474,382.5451 L388.6879,392.9002 L389.012,403.2554 L389.1198,413.6106 L388.5362,423.9657 L388.9406,434.3209 L387.7466,444.676 L388.9366,455.0312 L389.303,465.3863 L389.1591,475.7415 L389.3931,486.0967 L388.5417,496.4518 " fill="none" style="stroke:#555555;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;"/><polygon fill="none" points="61.4583,10.4167,61.4583,10.6356,72.2917,9.9851,83.125,10.618,93.9583,10.833,104.7917,9.6735,115.625,10.4167,115.6147,10.3917,116.1576,10.5239,116.7526,10.7818,117.3837,11.127,117.8902,11.1712,118.5713,11.6371,118.7489,11.7106,118.6132,12.1426,118.996,12.7893,119.4421,13.4622,119.5201,13.9827,119.7917,14.5833,119.8154,14.5833,119.7806,20.861,119.8537,27.1387,119.8747,33.4163,119.995,39.694,119.7917,45.9717,120.0069,46.0608,119.7655,46.6512,119.3852,47.184,119.2081,47.801,119.0406,48.422,118.5713,48.918,118.4754,48.6866,118.0722,49.3797,117.3534,49.311,116.8744,49.8214,116.1485,49.7355,115.625,50.1383,115.625,50.067,104.7917,50.9109,93.9583,50.0876,83.125,50.248,72.2917,50.4911,61.4583,50.1383,61.5136,50.2719,60.8686,49.893,60.318,49.7423,59.6145,49.2225,59.1391,49.2533,58.5121,48.918,58.6879,48.9908,58.4106,48.3878,58.2206,47.8209,57.6249,47.086,57.3265,46.4743,57.2917,45.9717,57.0759,45.9717,57.2712,39.694,57.2234,33.4163,57.5283,27.1387,57.231,20.861,57.2917,14.5833,57.1816,14.5377,57.609,14.0244,57.5659,13.3162,57.8574,12.7466,58.4762,12.3125,58.5121,11.6371,58.5699,11.7768,59.1989,11.6286,59.6478,11.0457,60.3222,11.0072,60.9475,10.8501,61.4583,10.4167" style="stroke:#333333;stroke-width:1.0416666666666667;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="69.7917" y="35.0016">客户端</text><polygon fill="none" points="61.4583,495.4102,61.4583,495.6291,72.2917,494.9786,83.125,495.6115,93.9583,495.8265,104.7917,494.667,115.625,495.4102,115.6147,495.3852,116.1576,495.5174,116.7526,495.7753,117.3837,496.1205,117.8902,496.1647,118.5713,496.6305,118.7489,496.7041,118.6132,497.1361,118.996,497.7828,119.4421,498.4557,119.5201,498.9762,119.7917,499.5768,119.8154,499.5768,119.7806,505.8545,119.8537,512.1322,119.8747,518.4098,119.995,524.6875,119.7917,530.9652,120.0069,531.0543,119.7655,531.6447,119.3852,532.1775,119.2081,532.7945,119.0406,533.4155,118.5713,533.9114,118.4754,533.6801,118.0722,534.3732,117.3534,534.3045,116.8744,534.8149,116.1485,534.729,115.625,535.1318,115.625,535.0605,104.7917,535.9043,93.9583,535.0811,83.125,535.2415,72.2917,535.4846,61.4583,535.1318,61.5136,535.2654,60.8686,534.8865,60.318,534.7358,59.6145,534.216,59.1391,534.2468,58.5121,533.9114,58.6879,533.9843,58.4106,533.3813,58.2206,532.8144,57.6249,532.0795,57.3265,531.4678,57.2917,530.9652,57.0759,530.9652,57.2712,524.6875,57.2234,518.4098,57.5283,512.1322,57.231,505.8545,57.2917,499.5768,57.1816,499.5312,57.609,499.0179,57.5659,498.3097,57.8574,497.7401,58.4762,497.306,58.5121,496.6305,58.5699,496.7703,59.1989,496.6221,59.6478,496.0392,60.3222,496.0007,60.9475,495.8436,61.4583,495.4102" style="stroke:#333333;stroke-width:1.0416666666666667;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="69.7917" y="519.9951">客户端</text><polygon fill="none" points="361.4583,10.4167,361.4583,10.6356,372.2917,9.9851,383.125,10.618,393.9583,10.833,404.7917,9.6735,415.625,10.4167,415.6147,10.3917,416.1576,10.5239,416.7526,10.7818,417.3837,11.127,417.8902,11.1712,418.5713,11.6371,418.7489,11.7106,418.6132,12.1426,418.996,12.7893,419.4421,13.4622,419.5201,13.9827,419.7917,14.5833,419.8154,14.5833,419.7806,20.861,419.8537,27.1387,419.8747,33.4163,419.995,39.694,419.7917,45.9717,420.0069,46.0608,419.7655,46.6512,419.3852,47.184,419.2081,47.801,419.0406,48.422,418.5713,48.918,418.4754,48.6866,418.0722,49.3797,417.3534,49.311,416.8744,49.8214,416.1485,49.7355,415.625,50.1383,415.625,50.067,404.7917,50.9109,393.9583,50.0876,383.125,50.248,372.2917,50.4911,361.4583,50.1383,361.5136,50.2719,360.8686,49.893,360.318,49.7423,359.6145,49.2225,359.1391,49.2533,358.5121,48.918,358.6879,48.9908,358.4106,48.3878,358.2206,47.8209,357.6249,47.086,357.3265,46.4743,357.2917,45.9717,357.0759,45.9717,357.2712,39.694,357.2234,33.4163,357.5283,27.1387,357.231,20.861,357.2917,14.5833,357.1816,14.5377,357.609,14.0244,357.5659,13.3162,357.8574,12.7466,358.4762,12.3125,358.5121,11.6371,358.5699,11.7768,359.1989,11.6286,359.6478,11.0457,360.3222,11.0072,360.9475,10.8501,361.4583,10.4167" style="stroke:#333333;stroke-width:1.0416666666666667;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="369.7917" y="35.0016">服务器</text><polygon fill="none" points="361.4583,495.4102,361.4583,495.6291,372.2917,494.9786,383.125,495.6115,393.9583,495.8265,404.7917,494.667,415.625,495.4102,415.6147,495.3852,416.1576,495.5174,416.7526,495.7753,417.3837,496.1205,417.8902,496.1647,418.5713,496.6305,418.7489,496.7041,418.6132,497.1361,418.996,497.7828,419.4421,498.4557,419.5201,498.9762,419.7917,499.5768,419.8154,499.5768,419.7806,505.8545,419.8537,512.1322,419.8747,518.4098,419.995,524.6875,419.7917,530.9652,420.0069,531.0543,419.7655,531.6447,419.3852,532.1775,419.2081,532.7945,419.0406,533.4155,418.5713,533.9114,418.4754,533.6801,418.0722,534.3732,417.3534,534.3045,416.8744,534.8149,416.1485,534.729,415.625,535.1318,415.625,535.0605,404.7917,535.9043,393.9583,535.0811,383.125,535.2415,372.2917,535.4846,361.4583,535.1318,361.5136,535.2654,360.8686,534.8865,360.318,534.7358,359.6145,534.216,359.1391,534.2468,358.5121,533.9114,358.6879,533.9843,358.4106,533.3813,358.2206,532.8144,357.6249,532.0795,357.3265,531.4678,357.2917,530.9652,357.0759,530.9652,357.2712,524.6875,357.2234,518.4098,357.5283,512.1322,357.231,505.8545,357.2917,499.5768,357.1816,499.5312,357.609,499.0179,357.5659,498.3097,357.8574,497.7401,358.4762,497.306,358.5121,496.6305,358.5699,496.7703,359.1989,496.6221,359.6478,496.0392,360.3222,496.0007,360.9475,495.8436,361.4583,495.4102" style="stroke:#333333;stroke-width:1.0416666666666667;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="369.7917" y="519.9951">服务器</text><polygon fill="#333333" points="376.0417,88.8184,376.0688,88.8861,378.0716,89.5181,380.2333,90.5473,382.3432,91.4472,384.283,91.9217,386.4583,92.985,386.4483,92.96,384.32,93.6809,382.2422,94.5281,380.1995,95.4631,378.0358,96.0955,376.0417,97.1517,376.1776,97.2876,376.7203,96.1636,377.6598,95.4365,378.6477,94.7577,379.3539,93.7973,380.2083,92.985,380.2251,93.0018,379.3672,92.1438,378.5855,91.3622,377.767,90.5437,377.0188,89.7955,376.0417,88.8184" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M88.5417,92.985 L88.5417,93.2769 L99.0327,92.4096 L109.5238,93.2535 L120.0149,93.5401 L130.506,91.9942 L140.997,92.8771 L151.4881,92.3927 L161.9792,92.4524 L172.4702,92.8904 L182.9613,92.0248 L193.4524,93.754 L203.9435,92.1096 L214.4345,92.7104 L224.9256,93.585 L235.4167,92.8659 L245.9077,93.0798 L256.3988,92.9407 L266.8899,93.233 L277.381,93.3172 L287.872,93.7985 L298.3631,93.917 L308.8542,93.9284 L319.3452,93.3387 L329.8363,93.6289 L340.3274,93.9603 L350.8185,91.9834 L361.3095,93.9274 L371.8006,92.5732 L382.2917,92.985 " fill="none" style="stroke:#333333;stroke-width:3.125;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="88.5417" x="194.2708" y="83.0566">1. SSH请求连接</text><polygon fill="#333333" points="100,128.54,100.0271,128.6078,97.8632,129.2398,95.8583,130.269,93.8015,131.1689,91.5747,131.6434,89.5833,132.7067,89.5733,132.6817,91.6117,133.4025,93.7005,134.2497,95.8245,135.1847,97.8275,135.8172,100,136.8734,100.1359,137.0093,99.0119,135.8853,98.2848,135.1581,97.6061,134.4794,96.6456,133.519,95.8333,132.7067,95.8501,132.7235,96.6588,131.8655,97.5438,131.0839,98.392,130.2654,99.3105,129.5172,100,128.54" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M93.75,132.7067 L93.75,132.9986 L104.2411,132.1313 L114.7321,132.9752 L125.2232,133.2618 L135.7143,131.7159 L146.2054,132.5988 L156.6964,132.1144 L167.1875,132.1741 L177.6786,132.612 L188.1696,131.7465 L198.6607,133.4757 L209.1518,131.8313 L219.6429,132.432 L230.1339,133.3066 L240.625,132.5876 L251.1161,132.8015 L261.6071,132.6623 L272.0982,132.9547 L282.5893,133.0388 L293.0804,133.5202 L303.5714,133.6387 L314.0625,133.6501 L324.5536,133.0604 L335.0446,133.3506 L345.5357,133.682 L356.0268,131.7051 L366.5179,133.6491 L377.0089,132.2949 L387.5,132.7067 " fill="none" style="stroke:#333333;stroke-width:3.125;stroke-dasharray:2.0,2.0;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="116.6667" x="180.2083" y="122.7783">2. 服务器发送其公钥</text><path d="M93.75,150.415 L93.9446,150.415 L93.3664,158.7484 L93.929,167.0817 L94.1201,175.415 L93.0894,183.7484 L93.75,192.0817 L97.9167,196.2484 L97.9167,196.0325 L108.5938,195.0637 L119.2708,195.1831 L129.9479,196.059 L140.625,194.3279 L151.3021,197.7863 L161.9792,194.4976 L172.6563,195.699 L183.3333,197.4482 L194.0104,196.0101 L204.6875,196.4379 L215.3646,196.1596 L226.0417,196.2484 L230.2083,192.0817 L230.3736,192.0817 L230.4298,184.9984 L230.7506,177.915 L230.8297,170.8317 L230.8373,163.7484 L230.2083,156.665 L230.375,156.8318 L228.4285,154.8852 L226.5014,152.9581 L223.4862,149.9429 L222.3192,148.7759 L219.7917,146.2484 L219.7917,145.4248 L209.6354,147.7312 L199.4792,144.8733 L189.3229,146.0581 L179.1667,148.3084 L169.0104,146.113 L158.8542,146.5409 L148.6979,147.189 L138.5417,147.4046 L128.3854,146.2375 L118.2292,147.0462 L108.0729,144.6583 L97.9167,146.2484 L93.75,150.415 " fill="#17A2B8" style="stroke:#2E2E2E;stroke-width:1.0416666666666667;"/><path d="M219.7917,146.2484 L220.055,146.2484 L220.2993,147.915 L220.2033,149.5817 L220.3593,151.2484 L219.3444,152.915 L219.7917,154.5817 L221.875,156.665 L221.875,156.0612 L223.5417,156.0897 L225.2083,156.6105 L226.875,156.4831 L228.5417,157.296 L230.2083,156.665 L230.094,156.5507 L227.9004,154.3571 L226.1911,152.6478 L223.5217,149.9784 L221.5351,147.9918 L219.7917,146.2484 " fill="#17A2B8" style="stroke:#2E2E2E;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="104.1667" x="105.2083" y="168.75">3. 客户端检查公钥</text><text fill="#FFFFFF" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="62.5" x="105.2083" y="183.4717">（可选的）</text><polygon fill="#333333" points="376.0417,228.9551,376.0688,229.0228,378.0716,229.6548,380.2333,230.6841,382.3432,231.5839,384.283,232.0584,386.4583,233.1217,386.4483,233.0967,384.32,233.8176,382.2422,234.6648,380.1995,235.5998,378.0358,236.2322,376.0417,237.2884,376.1776,237.4243,376.7203,236.3003,377.6598,235.5732,378.6477,234.8945,379.3539,233.934,380.2083,233.1217,380.2251,233.1385,379.3672,232.2806,378.5855,231.4989,377.767,230.6805,377.0188,229.9322,376.0417,228.9551" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M88.5417,233.1217 L88.5417,233.4137 L99.0327,232.5463 L109.5238,233.3902 L120.0149,233.6769 L130.506,232.1309 L140.997,233.0138 L151.4881,232.5294 L161.9792,232.5891 L172.4702,233.0271 L182.9613,232.1615 L193.4524,233.8907 L203.9435,232.2464 L214.4345,232.8471 L224.9256,233.7217 L235.4167,233.0026 L245.9077,233.2165 L256.3988,233.0774 L266.8899,233.3697 L277.381,233.4539 L287.872,233.9352 L298.3631,234.0538 L308.8542,234.0652 L319.3452,233.4754 L329.8363,233.7656 L340.3274,234.0971 L350.8185,232.1201 L361.3095,234.0641 L371.8006,232.7099 L382.2917,233.1217 " fill="none" style="stroke:#333333;stroke-width:3.125;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="191.6667" x="142.7083" y="223.1934">4. 客户端发送自己的公钥认证请求</text><polygon fill="#333333" points="100,268.6768,100.0271,268.7445,97.8632,269.3765,95.8583,270.4057,93.8015,271.3056,91.5747,271.7801,89.5833,272.8434,89.5733,272.8184,91.6117,273.5393,93.7005,274.3865,95.8245,275.3215,97.8275,275.9539,100,277.0101,100.1359,277.146,99.0119,276.022,98.2848,275.2949,97.6061,274.6161,96.6456,273.6557,95.8333,272.8434,95.8501,272.8602,96.6588,272.0022,97.5438,271.2206,98.392,270.4021,99.3105,269.6539,100,268.6768" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M93.75,272.8434 L93.75,273.1353 L104.2411,272.268 L114.7321,273.1119 L125.2232,273.3985 L135.7143,271.8526 L146.2054,272.7355 L156.6964,272.2511 L167.1875,272.3108 L177.6786,272.7488 L188.1696,271.8832 L198.6607,273.6124 L209.1518,271.968 L219.6429,272.5687 L230.1339,273.4434 L240.625,272.7243 L251.1161,272.9382 L261.6071,272.7991 L272.0982,273.0914 L282.5893,273.1756 L293.0804,273.6569 L303.5714,273.7754 L314.0625,273.7868 L324.5536,273.1971 L335.0446,273.4873 L345.5357,273.8187 L356.0268,271.8418 L366.5179,273.7858 L377.0089,272.4316 L387.5,272.8434 " fill="none" style="stroke:#333333;stroke-width:3.125;stroke-dasharray:2.0,2.0;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="264.5833" x="106.25" y="262.915">5. 服务器检查公钥是否存在于authorized_keys</text><path d="M393.75,290.5518 L393.9446,290.5518 L393.3664,295.9684 L393.929,301.3851 L394.1201,306.8018 L393.0894,312.2184 L393.75,317.6351 L397.9167,321.8018 L397.9167,321.5859 L408.4635,320.6171 L419.0104,320.7365 L429.5573,321.6124 L440.1042,319.8813 L450.651,323.3397 L461.1979,320.051 L471.7448,321.2524 L482.2917,323.0016 L492.8385,321.5635 L503.3854,321.9913 L513.9323,321.713 L524.4792,322.2977 L535.026,322.466 L545.5729,323.4287 L556.1198,323.6658 L566.6667,323.6886 L577.2135,322.5091 L587.7604,323.0895 L598.3073,323.7524 L608.8542,319.7985 L619.401,323.6865 L629.9479,320.9781 L640.4948,323.2846 L651.0417,321.8018 L655.2083,317.6351 L654.75,317.6351 L655.1449,313.4684 L655.895,309.3018 L655.1632,305.1351 L655.3058,300.9684 L655.2083,296.8018 L655.43,297.0235 L653.3975,294.9909 L651.0391,292.6325 L649.1464,290.7398 L646.5002,288.0936 L644.7917,286.3851 L644.7917,287.1751 L634.5052,287.9079 L624.2188,287.6199 L613.9323,288.0879 L603.6458,285.0432 L593.3594,284.5735 L583.0729,284.659 L572.7865,286.2215 L562.5,285.8392 L552.2135,288.2779 L541.9271,285.8999 L531.6406,285.4322 L521.3542,287.0192 L511.0677,284.5328 L500.7813,284.9431 L490.4948,288.1877 L480.2083,287.5953 L469.9219,288.4253 L459.6354,285.4912 L449.349,287.2718 L439.0625,288.0251 L428.776,285.0729 L418.4896,286.1188 L408.2031,286.735 L397.9167,286.3851 L393.75,290.5518 " fill="#17A2B8" style="stroke:#2E2E2E;stroke-width:1.0416666666666667;"/><path d="M644.7917,286.3851 L645.3951,286.3851 L644.7878,288.0518 L645.22,289.7184 L644.2789,291.3851 L644.1646,293.0518 L644.7917,294.7184 L646.875,296.8018 L646.875,297.2681 L648.5417,296.1379 L650.2083,297.273 L651.875,296.9931 L653.5417,296.5537 L655.2083,296.8018 L654.9767,296.5701 L653.4254,295.0188 L650.8457,292.4391 L649.3458,290.9393 L646.5131,288.1065 L644.7917,286.3851 " fill="#17A2B8" style="stroke:#2E2E2E;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="229.1667" x="405.2083" y="308.8867">6. 如果存在，服务器请求公钥的加密挑战</text><polygon fill="#333333" points="376.0417,354.3701,376.0688,354.4379,378.0716,355.0699,380.2333,356.0991,382.3432,356.999,384.283,357.4735,386.4583,358.5368,386.4483,358.5117,384.32,359.2326,382.2422,360.0798,380.1995,361.0148,378.0358,361.6472,376.0417,362.7035,376.1776,362.8394,376.7203,361.7154,377.6598,360.9882,378.6477,360.3095,379.3539,359.3491,380.2083,358.5368,380.2251,358.5535,379.3672,357.6956,378.5855,356.9139,377.767,356.0955,377.0188,355.3473,376.0417,354.3701" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M88.5417,358.5368 L88.5417,358.8287 L99.0327,357.9613 L109.5238,358.8052 L120.0149,359.0919 L130.506,357.546 L140.997,358.4288 L151.4881,357.9444 L161.9792,358.0041 L172.4702,358.4421 L182.9613,357.5765 L193.4524,359.3057 L203.9435,357.6614 L214.4345,358.2621 L224.9256,359.1367 L235.4167,358.4176 L245.9077,358.6316 L256.3988,358.4924 L266.8899,358.7847 L277.381,358.8689 L287.872,359.3502 L298.3631,359.4688 L308.8542,359.4802 L319.3452,358.8904 L329.8363,359.1807 L340.3274,359.5121 L350.8185,357.5351 L361.3095,359.4792 L371.8006,358.125 L382.2917,358.5368 " fill="none" style="stroke:#333333;stroke-width:3.125;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="191.6667" x="142.7083" y="348.6084">7. 客户端使用私钥对挑战进行签名</text><polygon fill="#333333" points="376.0417,394.0918,376.0688,394.1596,378.0716,394.7916,380.2333,395.8208,382.3432,396.7206,384.283,397.1951,386.4583,398.2585,386.4483,398.2334,384.32,398.9543,382.2422,399.8015,380.1995,400.7365,378.0358,401.3689,376.0417,402.4251,376.1776,402.5611,376.7203,401.437,377.6598,400.7099,378.6477,400.0312,379.3539,399.0707,380.2083,398.2585,380.2251,398.2752,379.3672,397.4173,378.5855,396.6356,377.767,395.8172,377.0188,395.0689,376.0417,394.0918" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M88.5417,398.2585 L88.5417,398.5504 L99.0327,397.683 L109.5238,398.5269 L120.0149,398.8136 L130.506,397.2676 L140.997,398.1505 L151.4881,397.6661 L161.9792,397.7258 L172.4702,398.1638 L182.9613,397.2982 L193.4524,399.0274 L203.9435,397.3831 L214.4345,397.9838 L224.9256,398.8584 L235.4167,398.1393 L245.9077,398.3532 L256.3988,398.2141 L266.8899,398.5064 L277.381,398.5906 L287.872,399.0719 L298.3631,399.1905 L308.8542,399.2019 L319.3452,398.6121 L329.8363,398.9023 L340.3274,399.2338 L350.8185,397.2568 L361.3095,399.2008 L371.8006,397.8467 L382.2917,398.2585 " fill="none" style="stroke:#333333;stroke-width:3.125;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="166.6667" x="155.2083" y="388.3301">8. 客户端发送签名的挑战回应</text><polygon fill="#333333" points="100,433.8135,100.0271,433.8812,97.8632,434.5132,95.8583,435.5425,93.8015,436.4423,91.5747,436.9168,89.5833,437.9801,89.5733,437.9551,91.6117,438.676,93.7005,439.5232,95.8245,440.4582,97.8275,441.0906,100,442.1468,100.1359,442.2827,99.0119,441.1587,98.2848,440.4316,97.6061,439.7529,96.6456,438.7924,95.8333,437.9801,95.8501,437.9969,96.6588,437.139,97.5438,436.3573,98.392,435.5389,99.3105,434.7906,100,433.8135" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M93.75,437.9801 L93.75,438.2721 L104.2411,437.4047 L114.7321,438.2486 L125.2232,438.5353 L135.7143,436.9893 L146.2054,437.8722 L156.6964,437.3878 L167.1875,437.4475 L177.6786,437.8855 L188.1696,437.0199 L198.6607,438.7491 L209.1518,437.1048 L219.6429,437.7055 L230.1339,438.5801 L240.625,437.861 L251.1161,438.0749 L261.6071,437.9358 L272.0982,438.2281 L282.5893,438.3123 L293.0804,438.7936 L303.5714,438.9122 L314.0625,438.9236 L324.5536,438.3338 L335.0446,438.624 L345.5357,438.9555 L356.0268,436.9785 L366.5179,438.9225 L377.0089,437.5683 L387.5,437.9801 " fill="none" style="stroke:#333333;stroke-width:3.125;stroke-dasharray:2.0,2.0;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="204.1667" x="136.4583" y="428.0518">9. 服务器用公钥验证签名并授权登录</text><polygon fill="#333333" points="100,473.5352,100.0271,473.6029,97.8632,474.2349,95.8583,475.2641,93.8015,476.164,91.5747,476.6385,89.5833,477.7018,89.5733,477.6768,91.6117,478.3977,93.7005,479.2449,95.8245,480.1799,97.8275,480.8123,100,481.8685,100.1359,482.0044,99.0119,480.8804,98.2848,480.1533,97.6061,479.4745,96.6456,478.5141,95.8333,477.7018,95.8501,477.7186,96.6588,476.8606,97.5438,476.079,98.392,475.2605,99.3105,474.5123,100,473.5352" style="stroke:#333333;stroke-width:1.0416666666666667;"/><path d="M93.75,477.7018 L93.75,477.9937 L104.2411,477.1264 L114.7321,477.9703 L125.2232,478.2569 L135.7143,476.711 L146.2054,477.5939 L156.6964,477.1095 L167.1875,477.1692 L177.6786,477.6072 L188.1696,476.7416 L198.6607,478.4708 L209.1518,476.8264 L219.6429,477.4271 L230.1339,478.3017 L240.625,477.5827 L251.1161,477.7966 L261.6071,477.6575 L272.0982,477.9498 L282.5893,478.034 L293.0804,478.5153 L303.5714,478.6338 L314.0625,478.6452 L324.5536,478.0555 L335.0446,478.3457 L345.5357,478.6771 L356.0268,476.7002 L366.5179,478.6442 L377.0089,477.29 L387.5,477.7018 " fill="none" style="stroke:#333333;stroke-width:3.125;stroke-dasharray:2.0,2.0;"/><text fill="#2E2E2E" font-family="&quot;Segoe Print&quot;" font-size="12.5" lengthAdjust="spacing" textLength="162.5" x="157.2917" y="467.7734">10. 登录成功，开始加密会话</text><!--MD5=[38d49010a15302dfeb1537daf5c58c7f]
@startuml
skinparamlocked roundcorner 10
skinparamlocked sequenceMessageAlign center
skinparamlocked arrowColor #5ac7c3
skinparamlocked arrowFontColor #white
skinparamlocked participantBackgroundColor #394248
skinparamlocked participantFontColor #57cc8a
skinparamlocked participantBorderColor #394248
skinparamlocked actorFontColor #white
skinparamlocked actorBorderColor #57cc8a
skinparamlocked actorBackgroundColor #transparent
skinparamlocked sequenceLifeLineBorderColor #afbac4
skinparamlocked noteBackgroundColor #f43655
skinparamlocked noteFontColor #white

!theme sketchy-outline

participant "客户端" as Client
participant "服务器" as Server

Client -> Server: 1. SSH请求连接
Server - -> Client: 2. 服务器发送其公钥
note right of Client: 3. 客户端检查公钥\n（可选的）
Client -> Server: 4. 客户端发送自己的公钥认证请求
Server - -> Client: 5. 服务器检查公钥是否存在于authorized_keys
note right of Server: 6. 如果存在，服务器请求公钥的加密挑战
Client -> Server: 7. 客户端使用私钥对挑战进行签名
Client -> Server: 8. 客户端发送签名的挑战回应
Server - -> Client: 9. 服务器用公钥验证签名并授权登录
Server - -> Client: 10. 登录成功，开始加密会话
@enduml

@startuml
skinparamlocked roundcorner 10
skinparamlocked sequenceMessageAlign center
skinparamlocked arrowColor #5ac7c3
skinparamlocked arrowFontColor #white
skinparamlocked participantBackgroundColor #394248
skinparamlocked participantFontColor #57cc8a
skinparamlocked participantBorderColor #394248
skinparamlocked actorFontColor #white
skinparamlocked actorBorderColor #57cc8a
skinparamlocked actorBackgroundColor #transparent
skinparamlocked sequenceLifeLineBorderColor #afbac4
skinparamlocked noteBackgroundColor #f43655
skinparamlocked noteFontColor #white




skinparam backgroundColor transparent
skinparam useBetaStyle false
skinparam handwritten true
skinparam shadowing false






<style>
  root {
    BackgroundColor transparent
    FontColor #2e2e2e
    HyperLinkColor #fd7e14
    LineColor #2e2e2e
    LineThickness 1
    Margin 10
    Padding 6
    Shadowing 0.0
  }
  node {
   Padding 15
   roundcorner 20
   BackgroundColor transparent
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  groupHeader {
    BackgroundColor #555555
    FontColor #17a2b8
    FontStyle bold
  }
  header {
    LineThickness 0
  }
  referenceHeader {
    BackgroundColor transparent
    FontColor #555555
    FontStyle bold
  }
  separator {
    BackgroundColor #ffffff
    FontColor transparent
    FontStyle bold
  }
  title {
	FontSize 20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor  transparent
	FontColor #333333
	BorderColor #555555
  }
  nwdiagDiagram {
	network {
			FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent    
		LineColor #333333
		LineThickness 1.0
		FontColor #2e2e2e
	}
	server {
			FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	}
	arrow {
		FontColor #2e2e2e
		LineColor #2e2e2e
	}
	group {
		BackGroundColor #ffffff
		LineColor #e6e6e6
		LineThickness 2.0
		Margin 5
		Padding 5
	}
  }
  ganttDiagram {
	task {
			FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
		LineColor #333333
		Margin 10
		Padding 6
	}
	note {
		FontColor #ffffff
		LineColor #1592a6
		BackGroundColor transparent
	}
	separator {
		LineColor #4d4d4d
		BackGroundColor transparent
		FontColor #ffffff
	}
	milestone {
		FontColor #17a2b8
		FontSize 16
		FontStyle italic
		BackGroundColor #555555
		LineColor #4d4d4d
	}
	timeline {
		BackgroundColor #555555
		FontColor #ffffff
	}
	closed {
		BackgroundColor #e6ae06
		FontColor #ffffff
	}
  }
</style>
skinparam defaultFontName       "Segoe Print"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #555555
skinparam stereotype {
    CBackgroundColor transparent
    CBorderColor #4d4d4d
    ABackgroundColor transparent
    ABorderColor #24963e
    IBackgroundColor transparent
    IBorderColor #c6303e
    EBackgroundColor transparent
    EBorderColor #e6ae06
    NBackgroundColor transparent
    NBorderColor #1592a6
}
skinparam title {
	FontColor	                 #2e2e2e
	BorderColor	                 #4d4d4d
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              transparent
}

skinparam legend {
	BackgroundColor transparent
	BorderColor #4d4d4d
	FontColor #2e2e2e
}

skinparam swimlane {
	BorderColor #17a2b8
	BorderThickness 2
	TitleBackgroundColor  transparent
	TitleFontColor #2e2e2e
}


skinparam activity {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	BarColor #28a745
	StartColor #17a2b8
	EndColor #17a2b8
	DiamondBackgroundColor transparent
  	DiamondBorderColor #4d4d4d
  	DiamondFontColor #2e2e2e
}


skinparam participant {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam arrow {
	Thickness 3
	Color #333333
	FontColor #2e2e2e
}


skinparam sequence {
	BorderColor #333333
	TitleFontColor #2e2e2e
	BackgroundColor transparent
	StartColor #333333
	EndColor #333333
	BoxBackgroundColor transparent
	BoxBorderColor #555555
	BoxFontColor #555555
	DelayFontColor #555555
	LifeLineBorderColor #555555
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #4d4d4d
	GroupBorderColor #555555
	GroupFontColor #555555
	GroupHeaderFontColor #17a2b8
	GroupBackgroundColor #555555
	GroupHeaderBackgroundColor transparent
	DividerBackgroundColor #555555
    DividerBorderColor #555555
    DividerBorderThickness 2
    DividerFontColor #ffffff
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #555555
	ReferenceFontColor #555555
	ReferenceHeaderFontColor #17a2b8
	ReferenceHeaderBackgroundColor #555555
	StereotypeFontColor #2e2e2e
}


skinparam partition {
	BorderColor #333333
	FontColor #333333
	BackgroundColor transparent
}


skinparam collections {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam control {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam entity {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam boundary {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam agent {
	BackgroundColor #ffc107
	BorderColor #ffc720
	FontColor #555555
}


skinparam note {
	BorderThickness 1
	BackgroundColor #17a2b8
	BorderColor #1592a6
	FontColor #ffffff
}


skinparam artifact {
	BackgroundColor transparent
	BorderColor #4d4d4d
	FontColor #4d4d4d
}


skinparam component {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam interface {
	BackgroundColor  transparent
	BorderColor  #dc3545
	FontColor #555555
}


skinparam storage {
	BackgroundColor transparent
  	BorderColor #e6ae06
	FontColor #e6ae06
}


skinparam node {
	BackgroundColor  transparent
	BorderColor #ffffff
	FontColor #ffffff
}


skinparam cloud {
	BackgroundColor transparent
	BorderColor #F2FCFE
	FontColor #2e2e2e
}


skinparam database {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam class {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	HeaderBackgroundColor transparent
	StereotypeFontColor #555555
	BorderThickness 1
	AttributeFontColor #555555
	AttributeFontSize 11
}


skinparam object {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	StereotypeFontColor #2e2e2e
	BorderThickness 1
	AttributeFontColor #2e2e2e
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #333333
}


skinparam rectangle {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #333333
}


skinparam package {
	BackgroundColor transparent
  	BorderColor #333333
	FontColor #333333
	BorderThickness 2
}


skinparam folder {
	BackgroundColor transparent
  	BorderColor #ffc107
	FontColor #ffc107
	BorderThickness 2
}


skinparam frame {
	BackgroundColor transparent
  	BorderColor #17a2b8
	FontColor #17a2b8
	BorderThickness 2
}


skinparam state {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
	StartColor #17a2b8
	EndColor #17a2b8
	AttributeFontColor #ffffff
	AttributeFontSize 11
}


skinparam queue {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}


skinparam card {
	BackgroundColor transparent
	BorderColor #1592a6
	FontColor #1592a6
}


skinparam file {
	BackgroundColor transparent
	BorderColor #ffffff
	FontColor #ffffff
}


skinparam stack {
		FontColor #2e2e2e
	BorderColor #333333
	BackgroundColor transparent
}

participant "客户端" as Client
participant "服务器" as Server

Client -> Server: 1. SSH请求连接
Server - -> Client: 2. 服务器发送其公钥
note right of Client: 3. 客户端检查公钥\n（可选的）
Client -> Server: 4. 客户端发送自己的公钥认证请求
Server - -> Client: 5. 服务器检查公钥是否存在于authorized_keys
note right of Server: 6. 如果存在，服务器请求公钥的加密挑战
Client -> Server: 7. 客户端使用私钥对挑战进行签名
Client -> Server: 8. 客户端发送签名的挑战回应
Server - -> Client: 9. 服务器用公钥验证签名并授权登录
Server - -> Client: 10. 登录成功，开始加密会话
@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>